version: "3.8"

services:
  gunicorn-app:
    build:
      context: ../
      dockerfile: ./dockerfiles/Dockerfile
    ports:
      - 8002:8005
    volumes:
      - /home/ubuntu/deploy/django-prac-004:/django-prac-004
    env_file:
      - /home/ubuntu/.env
    command:
      - /bin/bash
      - -c
      - cd /django-prac-004/django_project
      - python manage.py migrate --settings=mysite.settings.product
      - gunicorn -w 2 -b 0:8005 mysite.wsgi:application
        # --access-logfile /log/gunicorn/access.log \
        # --error-logfile /log/gunicorn/error.log 
    