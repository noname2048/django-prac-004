version: 2.1

jobs:
  build: # job names
    docker: # docker image
    - image: python:3.9.2
      auth:
        username: noname2048 
        password: $DOCKERHUB_PASSWORD
    environment:
      DEBUG: "False"
    working_directory: ~/project # default
    steps:
    - checkout
    - run:
        command: | # multiline string
          pip install --upgrade pip 
          pip install -r requirements.txt
    - run:
        command: |
          echo $SECRET > .secrets.json
          cd water
          python manage.py test

workflows:
  version: 2
  install_django: # workflow namespace
    jobs:
    - build
